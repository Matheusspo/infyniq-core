<div class="relative" style="width:100%; height:100%;">

  <!-- Mapa Leaflet -->
  <div #mapContainer class="map-container" style="border-radius: 24px; z-index: 0;"></div>

  <!-- Loading overlay -->
  @if (loading()) {
    <div
      class="absolute top-3 left-1/2 -translate-x-1/2 z-[1000] bg-white/95 backdrop-blur-sm border border-slate-100 rounded-2xl px-5 py-3 shadow-lg flex items-center gap-3"
    >
      <div class="w-4 h-4 rounded-full border-2 border-blue-600 border-t-transparent animate-spin"></div>
      <span class="text-[10px] font-black text-slate-500 uppercase tracking-widest">
        Geocodificando endereços…
      </span>
    </div>
  }

  <!-- Contador de clientes mapeados -->
  @if (!loading() && totalCount() > 0) {
    <div
      class="absolute bottom-4 left-4 z-[1000] bg-white/95 backdrop-blur-sm border border-slate-100 rounded-xl px-4 py-2 shadow-md flex items-center gap-2"
    >
      <div class="w-2 h-2 rounded-full bg-blue-500"></div>
      <span class="text-[10px] font-black text-slate-600 uppercase tracking-widest">
        {{ mappedCount() }} de {{ totalCount() }} clientes mapeados
      </span>
    </div>
  }

  <!-- Empty state -->
  @if (!loading() && totalCount() === 0) {
    <div
      class="absolute inset-0 flex flex-col items-center justify-center z-[1000] bg-slate-50/80 rounded-[24px]"
    >
      <svg class="w-10 h-10 text-slate-300 mb-3" fill="none" viewBox="0 0 24 24" stroke="currentColor">
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
          d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
        <path stroke-linecap="round" stroke-linejoin="round" stroke-width="1.5"
          d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
      </svg>
      <p class="text-[10px] font-black text-slate-400 uppercase tracking-widest">Nenhum cliente cadastrado</p>
    </div>
  }

</div>
