<div class="fixed inset-0 z-[100] flex justify-end">
  <!-- Overlay/Backdrop -->
  <div
    class="absolute inset-0 bg-slate-900/40 backdrop-blur-sm transition-opacity"
    (click)="cancel.emit()"
  ></div>

  <!-- Painel Form (Slide-in right) -->
  <form
    [formGroup]="equipmentForm"
    (ngSubmit)="onSubmit()"
    class="relative w-full max-w-lg h-full bg-white shadow-2xl flex flex-col rounded-l-[48px] border-l border-slate-100 overflow-hidden animate-in slide-in-from-right duration-500 z-10"
  >
    <header class="p-8 pb-6 border-b border-slate-50 flex justify-between items-start bg-gradient-to-r from-slate-50 to-white">
      <div>
        <div class="flex items-center gap-2 mb-1">
          <span class="w-2 h-2 rounded-full bg-blue-600 animate-pulse"></span>
          <span class="text-[10px] font-black text-blue-600 uppercase tracking-[0.2em]"
            >Configuração Técnica</span
          >
        </div>
        <h2 class="text-3xl font-black text-slate-800 tracking-tighter">
          {{ equipmentToEdit ? 'EDITAR PRONTUÁRIO' : 'NOVO EQUIPAMENTO' }}
        </h2>
      </div>
      <button
        type="button"
        (click)="cancel.emit()"
        class="p-3 hover:bg-slate-50 rounded-2xl transition-all group"
      >
        <i class="pi pi-times text-slate-400 group-hover:text-slate-900"></i>
      </button>
    </header>

    <div class="flex-1 overflow-y-auto p-8 custom-scrollbar">
      <div class="flex flex-col gap-10">
        <!-- Identificação -->
        <div class="space-y-6">
          <div class="flex items-center gap-2 mb-2">
            <i class="pi pi-id-card text-blue-500"></i>
            <h3 class="text-[10px] font-black text-slate-400 uppercase tracking-widest">
              Identificação
            </h3>
          </div>

          <div class="group">
            <label
              class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2"
              >Nome do Equipamento</label
            >
            <input
              formControlName="name"
              placeholder="Ex: Elevador Social 01"
              class="w-full bg-slate-50 border-2 border-transparent rounded-2xl px-6 py-4 font-bold text-slate-700 focus:bg-white focus:border-blue-500/10 outline-none transition-all placeholder:text-slate-300 placeholder:font-normal"
            />
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div class="group">
              <label
                class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2"
                >Marca</label
              >
              <input
                formControlName="brand"
                placeholder="Ex: Otis"
                class="w-full bg-slate-50 border-2 border-transparent rounded-2xl px-4 py-4 font-bold text-slate-700 focus:bg-white focus:border-blue-500/10 outline-none transition-all"
              />
            </div>
            <div class="group">
              <label
                class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2"
                >Modelo</label
              >
              <input
                formControlName="model"
                placeholder="Ex: Gen2"
                class="w-full bg-slate-50 border-2 border-transparent rounded-2xl px-4 py-4 font-bold text-slate-700 focus:bg-white focus:border-blue-500/10 outline-none transition-all"
              />
            </div>
          </div>

          <div class="grid grid-cols-2 gap-4">
            <div class="group">
              <label
                class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2"
                >Número de Série</label
              >
              <input
                formControlName="serialNumber"
                placeholder="S/N"
                class="w-full bg-slate-50 border-2 border-transparent rounded-2xl px-4 py-4 font-bold text-slate-700 focus:bg-white focus:border-blue-500/10 outline-none transition-all"
              />
            </div>
            <div class="group">
              <label
                class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2"
                >Ano Fabricação</label
              >
              <input
                type="number"
                formControlName="manufactureYear"
                class="w-full bg-slate-50 border-2 border-transparent rounded-2xl px-4 py-4 font-bold text-slate-700 focus:bg-white focus:border-blue-500/10 outline-none transition-all"
              />
            </div>
          </div>

          <div class="group">
            <label
              class="text-[10px] font-black text-slate-400 uppercase tracking-widest block mb-2"
              >Localização / Bloco</label
            >
            <input
              formControlName="position"
              placeholder="Ex: Bloco A - Hall Principal"
              class="w-full bg-slate-50 border-2 border-transparent rounded-2xl px-6 py-4 font-bold text-slate-700 focus:bg-white focus:border-blue-500/10 outline-none transition-all placeholder:text-slate-300 placeholder:font-normal"
            />
          </div>
        </div>

        <!-- Especificações -->
        <div class="flex flex-col">
          <div class="bg-indigo-50/50 rounded-[40px] p-8 border border-indigo-100/50 flex-1">
            <div class="flex items-center gap-2 mb-6">
              <i class="pi pi-cog text-indigo-500"></i>
              <h3 class="text-[10px] font-black text-indigo-500 uppercase tracking-widest">
                Especificações Técnicas
              </h3>
            </div>

            <div formGroupName="technicalSpecs" class="space-y-6">
              <div class="grid grid-cols-2 gap-4">
                <div class="group">
                  <label
                    class="text-[10px] font-black text-indigo-400 uppercase tracking-widest block mb-2"
                    >Paradas</label
                  >
                  <input
                    type="number"
                    formControlName="stops"
                    class="w-full bg-white border-2 border-indigo-100 rounded-2xl px-4 py-4 font-bold text-slate-700 focus:border-indigo-500/50 outline-none transition-all"
                  />
                </div>
                <div class="group">
                  <label
                    class="text-[10px] font-black text-indigo-400 uppercase tracking-widest block mb-2"
                    >Capacidade (KG)</label
                  >
                  <input
                    type="number"
                    formControlName="capacityKg"
                    class="w-full bg-white border-2 border-indigo-100 rounded-2xl px-4 py-4 font-bold text-slate-700 focus:border-indigo-500/50 outline-none transition-all"
                  />
                </div>
              </div>

              <div class="grid grid-cols-2 gap-4">
                <div class="group">
                  <label
                    class="text-[10px] font-black text-indigo-400 uppercase tracking-widest block mb-2"
                    >Lotação (Pess.)</label
                  >
                  <input
                    type="number"
                    formControlName="capacityPersons"
                    class="w-full bg-white border-2 border-indigo-100 rounded-2xl px-4 py-4 font-bold text-slate-700 focus:border-indigo-500/50 outline-none transition-all"
                  />
                </div>
                <div class="group">
                  <label
                    class="text-[10px] font-black text-indigo-400 uppercase tracking-widest block mb-2"
                    >Velocidade (m/s)</label
                  >
                  <input
                    type="number"
                    step="0.1"
                    formControlName="speed"
                    class="w-full bg-white border-2 border-indigo-100 rounded-2xl px-4 py-4 font-bold text-slate-700 focus:border-indigo-500/50 outline-none transition-all"
                  />
                </div>
              </div>

              <div class="group">
                <label
                  class="text-[10px] font-black text-indigo-400 uppercase tracking-widest block mb-2"
                  >Sistema de Tração</label
                >
                <select
                  formControlName="driveType"
                  class="w-full bg-white border-2 border-indigo-100 rounded-2xl px-4 py-4 font-bold text-slate-700 focus:border-indigo-500/50 outline-none transition-all cursor-pointer"
                >
                  <option value="GEARED">GEARED (Com Engrenagem)</option>
                  <option value="GEARLESS">GEARLESS (Sem Engrenagem)</option>
                  <option value="HYDRAULIC">HIDRÁULICO</option>
                </select>
              </div>

              <div class="group">
                <label
                  class="text-[10px] font-black text-indigo-400 uppercase tracking-widest block mb-2"
                  >Quadro de Comando</label
                >
                <input
                  formControlName="controlPanel"
                  placeholder="Ex: TKE Minitouch"
                  class="w-full bg-white border-2 border-indigo-100 rounded-2xl px-4 py-4 font-bold text-slate-700 focus:border-indigo-500/50 outline-none transition-all"
                />
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <footer class="p-8 bg-slate-50/50 border-t border-slate-50 flex justify-end gap-4">
      <button
        type="button"
        (click)="cancel.emit()"
        class="px-8 py-4 rounded-2xl font-black text-[11px] uppercase tracking-widest text-slate-400 hover:text-slate-600 transition-all hover:bg-slate-100"
      >
        Cancelar
      </button>
      <button
        type="submit"
        [disabled]="loading() || equipmentForm.invalid"
        class="bg-slate-900 text-white px-10 py-4 rounded-2xl font-black text-[11px] uppercase tracking-widest shadow-xl hover:bg-blue-600 disabled:opacity-50 transition-all active:scale-95"
      >
        @if (loading()) {
          <div class="flex items-center gap-2">
            <i class="pi pi-spin pi-spinner"></i>
            <span>Salvando...</span>
          </div>
        } @else {
          {{ equipmentToEdit ? 'Salvar Alterações' : 'Confirmar Cadastro' }}
        }
      </button>
    </footer>
  </form>
</div>
