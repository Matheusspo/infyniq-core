<div class="p-8 max-w-[1400px] mx-auto min-h-screen">
  @if (viewMode() === 'LIST') {
    <div class="animate-in fade-in slide-in-from-bottom-4 duration-500">
      <div class="flex justify-between items-center mb-8">
        <div>
          <h1 class="text-3xl font-black text-slate-800 tracking-tight uppercase">
            GESTÃO DE UNIDADES
          </h1>
          <p class="text-slate-500 text-sm font-medium">
            Selecione um condomínio para gerenciar o prontuário técnico
          </p>
        </div>

        <button
          (click)="showCustomerForm.set(true)"
          class="flex items-center gap-3 bg-[#1e293b] hover:bg-blue-600 text-white px-6 py-3 rounded-2xl font-bold transition-all shadow-xl shadow-slate-200 active:scale-95"
        >
          <svg
            class="w-5 h-5"
            fill="none"
            viewBox="0 0 24 24"
            stroke="currentColor"
            stroke-width="2.5"
          >
            <path d="M12 4v16m8-8H4" />
          </svg>
          Novo Condomínio
        </button>
      </div>

      @if (customersStore.loading()) {
        <div class="bg-white rounded-3xl p-8 shadow-sm border border-slate-100 animate-pulse">
          <div class="flex justify-end mb-6">
            <div class="h-10 bg-slate-100 rounded-2xl w-64"></div>
          </div>
          <div class="space-y-6">
            @for (i of [1, 2, 3, 4, 5]; track i) {
              <div class="flex items-center gap-4">
                <div class="h-12 bg-slate-50 rounded-xl flex-1"></div>
                <div class="h-12 bg-slate-50 rounded-xl w-32"></div>
                <div class="h-12 bg-slate-50 rounded-xl w-48"></div>
                <div class="h-12 bg-slate-50 rounded-xl w-24"></div>
              </div>
            }
          </div>
        </div>
      } @else {
        <div
          class="bg-white rounded-3xl p-1 shadow-sm border border-slate-100 animate-in fade-in duration-500"
        >
          <app-customers-list
            [customers]="customersStore.filteredCustomers()"
            (select)="onCustomerSelect($event)"
          >
          </app-customers-list>
        </div>
      }
    </div>

  } @else {
    <div class="animate-in fade-in slide-in-from-right-8 duration-500">
      <app-equipment-dashboard
        [customerName]="selectedCustomer()?.name || ''"
        (back)="goBackToList()"
        (addEquipment)="openEquipmentForm()"
        (editEquipment)="onEditEquipment($event)"
      >
      </app-equipment-dashboard>
    </div>
  }

  @if (showCustomerForm()) {
    <div
      class="fixed inset-0 bg-slate-900/60 backdrop-blur-md z-[100] flex items-center justify-center p-4"
    >
      <div class="animate-in zoom-in-95 duration-200 w-full max-w-2xl">
        <app-customer-form (save)="onSaveCustomer($event)" (cancel)="showCustomerForm.set(false)">
        </app-customer-form>
      </div>
    </div>
  }

  @if (showEquipmentForm()) {
    <div
      class="fixed inset-0 z-[110] flex items-center justify-center p-4 animate-in fade-in duration-300"
    >
      <div class="absolute inset-0 bg-slate-900/40 backdrop-blur-md"></div>
      <div class="relative z-10 w-full max-w-[800px]">
        <app-equipment-form
          [equipmentToEdit]="selectedEquipment()"
          (save)="onSaveEquipment($event)"
          (cancel)="closeEquipmentModal()"
        >
        </app-equipment-form>
      </div>
    </div>
  }
</div>
